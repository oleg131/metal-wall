(this.webpackJsonpmetal=this.webpackJsonpmetal||[]).push([[0],{21:function(e,t,a){e.exports=a(37)},26:function(e,t,a){},32:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),l=(a(26),a(8)),s=a(18),i=a(5),u=a(16),m=a(17),h=a.n(m),f=a(10),d=a.n(f),g=(a(32),"https://cors-anywhere.herokuapp.com/");function p(){return r.a.createElement(s.a,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:b})))}function b(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),s=Object(l.a)(o,2),i=s[0],m=s[1],h=Object(n.useState)(!0),f=Object(l.a)(h,2),p=f[0],b=f[1];function v(e){var t=e[2].match("\x3c!-- (.+) --\x3e")[1],a=document.createElement("html");a.innerHTML=e[0];var n=a.getElementsByTagName("a")[0].innerText,r=document.createElement("html");r.innerHTML=e[1];var c=r.getElementsByTagName("a")[0].innerText,o=r.getElementsByTagName("a")[0].getAttribute("href"),l=o.split("/").pop();return{url:o,id:l,cover:"https://www.metal-archives.com/images/".concat(l[0],"/").concat(l[1],"/").concat(l[2],"/").concat(l[3],"/").concat(l,"."),date:t,artist:n,album:c}}function w(e){var t=d()(),n=t.month()+1,r=t.year(),o=n,l=r,s=n,i=g+"https://www.metal-archives.com/search\n    /ajax-advanced/searching/albums/?bandName=&releaseTitle=\n    &releaseYearFrom=".concat(r-1,"&releaseMonthFrom=").concat(o,"\n    &releaseYearTo=").concat(l,"&releaseMonthTo=").concat(s,"\n    &country=&location=&releaseLabelName=&releaseCatalogNumber=&releaseIdentifiers=\n    &releaseRecordingInfo=&releaseDescription=&releaseNotes=&genre=&releaseType[]=1\n    &sEcho=1&iColumns=3&sColumns=&iDisplayStart=DISPLAYSTART\n    &iDisplayLength=200").replace(/\n/g,"").replace(/ /g,"");e?(console.log("fetch with start",e),fetch(i.replace("DISPLAYSTART",e)).then((function(e){return e.json()})).then((function(t){m(e-200),0!==t.aaData.length?((t=(t=t.aaData.map(v)).filter((function(e){return e.date<=d()().format("YYYY-MM-DD")}))).sort((function(e,t){return e.date<t.date})).reverse(),c(a.concat(t)),console.log("fetched",t.length)):b(!1)}))):(console.log("fetch initial"),fetch(i.replace("DISPLAYSTART",0)).then((function(e){return e.json()})).then((function(e){w(e.iTotalRecords-200)})))}return Object(n.useEffect)((function(){w(i)}),[]),r.a.createElement("main",{role:"main",className:"container-fluid text-center"},r.a.createElement(u.a,{dataLength:a.length,next:function(){return w(i)},hasMore:p,loader:"Loading",endMessage:"The end"},r.a.createElement("div",{className:"text-center"},a.map((function(e,t){return r.a.createElement(E,{data:e,key:t})})))))}function E(e){var t=e.data,a=Object(n.useState)("thumbnail zoom"),c=Object(l.a)(a,2),o=c[0],s=c[1];return r.a.createElement("div",{className:o},r.a.createElement("a",{href:"https://www.youtube.com/results?search_query="+t.artist+" "+t.album,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(h.a,{src:t.cover+"jpg",fallbackImage:[t.cover+"jpeg",r.a.createElement(v,{onLoad:function(){return s(o+" empty-thumbnail")}})],className:"thumbnail-image"})))}function v(e){var t=e.onLoad;return Object(n.useEffect)((function(){return t()})),r.a.createElement(n.Fragment,null)}var w=function(){return r.a.createElement("div",null,r.a.createElement(p,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(36);o.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[21,1,2]]]);
//# sourceMappingURL=main.92829f3f.chunk.js.map